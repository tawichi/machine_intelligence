更新日 2022年09月13日 投入日 2014年09月12日

Gitコミットの取り消し、打ち消し、上書き

Git,GitHub, 新人プログラマ

コミットの取り消し

直前のコミットをなかった事にするには以下のコマンドを叩けばOK。

・ --soft オプション : ワークディレクトリの内容はそのままでコミットだけを取り消したい場合に使用。

・ --hard オプション : コミット取り消した上でワークディレクトリの内容も書き換えたい場合に使用。

・ HEAD^ : 直前のコミットを意味する。

・ HEAD{n} :n個前のコミットを意味する。

・ HEAD^ や HEAD{n} の代わりにコミットのハッシュ値を書いても良い。

・ gitのv1.8.5からは、「HEAD」のエイリアスとして「@」が用意されている。

・ HEAD> と HEAD^ と {n}^ は同じ意味。

・ HEAD^^^ と HEAD<3 と HEAD<…> と HEAD{3} と @^^^ は同じ意味。

・ ただしWindowsの場合は git reset --soft "HEAD^" と、 HEAD^ を " で囲んでください。

git reset の詳細は以下のリンクに詳しく書いているので、ぜひ参考にされてください。

[git reset (--hard/--soft)ワーキングツリー、インデックス、HEADを使いこなす方法](https://qiita.com/shuntaro_tamura/items/db1aef9cf9d78db50ffe)

コミットの打ち消し

作業ツリーを指定したコミット時点の状態にまで戻し、コミットを行う (コミットをなかったことにはせず、逆向きのコミットをすることで履歴を残す) には以下のコマンドを叩けばOK。指定したコミットを打ち消すコミットを作成することができます。